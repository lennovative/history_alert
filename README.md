# HistoryAlert
A CLI tool for discovering historical events that happened on specific dates. Use this tool to explore events, birthdays, and more from history.
![Python Version](https://img.shields.io/badge/python-3.x-blue)
![License](https://img.shields.io/badge/license-MIT-green)
## Installation
### Prerequisites
Ensure Python 3 is installed on your system.

![HistoryAlert Banner](historyalert.png)

### Install via pip
```bash
git clone git+https://github.com/lennovative/history_alert.git
# Than open historyalert exe file
```

### Usage
Run without specified date
```bash
historyalert
```
Run with specified date
```
historyalert -d MM-DD
```
Run in silent mode
```
historyalert --silent -d MM-DD
```
# Utils
## get_database.py
get_database.py is a tool designed to fetch historical events and notable birthdays from Wikipedia for each day of the year. It processes the content into a structured format and saves the data into a CSV file for further use. The program is useful for building datasets for applications that need historical or birthday data by date.

### How to Run
```bash
python get_database.py
```
Dependencies
- requests
- csv
- re
- time
- bs4 (BeautifulSoup)
- datetime
- urllib.parse

### Key functions

fetch_day_html(day_title, WIKI_API_URL="https://en.wikipedia.org/w/api.php")

```python
def fetch_day_html(day_title, WIKI_API_URL="https://en.wikipedia.org/w/api.php"):
    """
    Fetches HTML content for a given day (e.g., "January 1") from Wikipedia.
    """
    params = {
        "action": "parse",
        "page": day_title,
        "format": "json",
        "prop": "text",
        "redirects": True,
    }
    response = requests.get(WIKI_API_URL, params=params)
    response.raise_for_status()

    data = response.json()
    page = data["parse"]["text"]["*"]
    return page


def clean_text(text):
    result = re.sub(r'\[ \d+\ ]', '', text)
    result = result.replace(" ,", ",")
    return result.strip()
```

clean_text(text)

```python
def clean_text(text):
    result = re.sub(r'\[ \d+\ ]', '', text)
    result = result.replace(" ,", ",")
    return result.strip()
```

parse_section(entry_type, section, day_title, BASE_WIKI_URL="https://en.wikipedia.org")

``` python
def parse_section(entry_type, section, day_title, BASE_WIKI_URL="https://en.wikipedia.org"):
    result = []
    for h3 in section.find_all_next(["h3", "h2"], limit=None):
        if h3.name == "h2":
            break
        ul = h3.find_next("ul")
        if ul:
            for li in ul.find_all("li"):
                text = li.get_text(separator=" ", strip=True)
                entry = tuple([v.strip() for v in text.split("â€“")])
                if not len(entry) == 2:
                    continue
                year, description = entry
                # Find all <a> tags within the <li> to get URLs
                links_all = [urljoin(BASE_WIKI_URL, a['href']) for a in li.find_all("a", href=True)]
                links = [v for v in links_all if v.split("/")[-1] != year and "#cite_note" not in v]

                result.append({
                    "day": day_title,
                    "year": year,
                    "type": entry_type,
                    "description": clean_text(description),
                    "links": links
                })
    return result
```

## database.csv

database.csv is a structured dataset containing historical events and notable moments for various dates throughout history. The file is generated by the get_database.py script and serves as a comprehensive source for applications that display historical facts or significant events by date.

### File Structure
The CSV file consists of the following columns:

Date: The day and month of the event in the format Month Day (e.g., January 01).
Year: The year the event took place. Years can be in BC or AD format.
Type: Specifies the category of the entry (e.g., Event, Birthday).
Description: A brief summary of the event or notable occurrence.
Links: A space-separated list of URLs that link to relevant Wikipedia pages for more context about the event.

### Database structure

## show_today_history.py
show_todays_history.py is a Python script designed to display a random historical event and a notable birthday for a specific date. It reads data from a CSV file (database.csv) and filters out events based on blacklisted words stored in an encoded binary file (blacklisted_words.bin). The script can show results for the current date or a user-specified date.

## Database sample

```csv
Date,Year,Type,Description,Links
January 01,153 BC,Event,"For the first time, Roman consuls begin their year in office on January 1.","https://en.wikipedia.org/wiki/153_BC https://en.wikipedia.org/wiki/Roman_consul"
January 01,45 BC,Event,"The Julian calendar takes effect as the civil calendar of the Roman Republic, establishing January 1 as the new date of the new year.","https://en.wikipedia.org/wiki/45_BC https://en.wikipedia.org/wiki/Julian_calendar"
January 01,42 BC,Event,"The Roman Senate posthumously deifies Julius Caesar.","https://en.wikipedia.org/wiki/42_BC https://en.wikipedia.org/wiki/Julius_Caesar"
```


### Key functions
To use the `load_data_by_date()` function:

```python
import csv

def load_data_by_date(filename, blacklist):
    data_by_date = {}
    with open(filename, mode="r", encoding="utf-8") as file:
        reader = csv.DictReader(file)
        for row in reader:
            date = row["Date"]
            if date not in data_by_date:
                data_by_date[date] = []
            data_by_date[date].append(row)
    return data_by_date

# Usage example
data = load_data_by_date("database.csv", [])
print(data)
```

`display_results(date, event, birthday)` function:

```python

def display_results(date, event, birthday):
    print("\n")
    print("HistoryAlert\n")
    if event:
        print(f"{date}, {event['Year']} - {event['Description']} ({event['Links']})\n")
    else:
        print("No events available for today.")

    if birthday:
        print(f"{date}, {birthday['Year']} - Birthday of {birthday['Description']} ({birthday['Links']})\n")
    else:
        print("No birthdays available for today.")
```

`get_random_event_and_birthday_for_date(data_by_date, date)` function:

```python
def get_random_event_and_birthday_for_date(data_by_date, date):
    if date in data_by_date:
        events = data_by_date[date]["Event"]
        birthdays = data_by_date[date]["Birthday"]
        random_event = random.choice(events) if events else None
        random_birthday = random.choice(birthdays) if birthdays else None
        return random_event, random_birthday
    else:
        print(f"No data found for {date}.")
        return None, None
```




## Summary
`HistoryAlert` is a comprehensive CLI tool that brings historical data to life by showcasing significant events and notable birthdays by date. Whether you are a history enthusiast, student, or educator, `HistoryAlert` is designed to make history more accessible and interesting.





